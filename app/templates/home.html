{% extends "base.html" %}

{% block content %}

                <div class="row">
                    <div class="col-lg-10">

                        <h1>Food Diary for <strong>{{ datestring }}</strong></h1>

                        <form method="get" id="datepicker-form">
                            <p>
                                <a href="{{ url_for('main.home', date = yesterday) }}"><i class="fa fa-arrow-left"></i></a>
                                <input type="text" id="datepicker-input" class="datepicker form-control" value="{{ placeholder }}" name="date" style="width: 200px; display: inline; margin-right: 5px;" />
                                <a href="{{ url_for('main.home', date = tomorrow) }}"><i class="fa fa-arrow-right"></i></a>
                                <i id="datepicker-icon" class="fa fa-calendar fa-2x"></i></a>
                            </p>
                        </form>

                        <form role="form" method="post">

                            {{ form.hidden_tag() }}

                            <div class="form-group">
                                {{ form.body(placeholder="Enter food", class="form-control", required="required", autofocus="autofocus") }}
                                <br />
                                <button class="btn btn-lg btn-success" type="submit">Add food</button>
                            </div>

                        </form>

                        {% if entries %}
                            {% if entries.count() > 0 %}
                                <div class="col-sm-8">
                                    <table class="table table-bordered table-hover table-striped">
                                        <tbody>
                                    {% for entry in entries %}
                                        <tr>
                                           {% if entry.user == g.user %}
                                               <td valign="middle">
                                               {% if g.user.photo %}
                                                   <img src="http://s3-ap-southeast-2.amazonaws.com/foodlog-userphotos/{{ g.user.photo }}" height="60" width="45" />
                                               {% endif %}
                                               {{ g.user.firstname }} {{ g.user.lastname }}
                                               </td>
                                               <td valign="middle"><strong>{{ entry.body }}</strong></td>
                                               <td width="10%">
                                               {% if entry.votes.count() > 0 %}
                                                   {% for vote in entry.votes %}
                                                       {% if vote.upvote %}
                                                           Good job!
                                                       {% else %}
                                                           Not so good!
                                                       {% endif %}
                                                   {% endfor %}
                                               {% endif %}
                                               </td>
                                               <td width="10%">
                                                   <form method="post" action="{{ url_for('main.remove_entry', id=entry.id) }}">
                                                       {{ removeform.hidden_tag() }}
                                                       <button type="submit" class="btn btn-danger delete-button" style="display: inline-block"><i class="fa fa-fw fa-trash fa-1"></i></button>
                                                   </form>
                                               </td>
                                           {% else %}
                                               <td valign="middle">
                                               {% if entry.user.photo %}
                                                   <img src="http://s3-ap-southeast-2.amazonaws.com/foodlog-userphotos/{{ entry.user.photo }}" height="60" width="45" />
                                               {% endif %}
                                               {{ entry.user.first_name }} {{ entry.user.last_name }}</td>
                                               <td valign="middle">{{ entry.body }}</td>
                                               <td width="10%">
                                               <button type="button" id="upvote-{{ entry.id }}" class="upvote btn 

                                               {% for vote in entry.votes %}
                                                   {% if vote.from_userid == g.user.id %}
                                                       {% if vote.upvote %}
                                                           btn-success
                                                       {% endif %}
                                                   {% endif %}
                                               {% endfor %}"style="display: inline-block; margin-bottom: 4px"><i class="fa fa-fw fa-thumbs-up fa-1"></i></button>
                                               <button type="button" id="downvote-{{ entry.id }}" class="downvote btn
                                               {% for vote in entry.votes %}
                                                   {% if vote.from_userid == g.user.id %}
                                                       {% if not vote.upvote %}
                                                           btn-danger
                                                       {% endif %}
                                                   {% endif %}
                                               {% endfor %}" style="display: inline-block"><i class="fa fa-fw fa-thumbs-down fa-1"></i></button>

                                               </td>
                                               <td width="10%">
                                               </td>
                                           {% endif %}
                                           </tr>
                                    {% endfor %}
                                    </tbody>
                                    </table>
                                </div>
                            {% endif %}
                        {% endif %}

                    </div>
                </div>
                <!-- /.row -->

{% endblock %}
